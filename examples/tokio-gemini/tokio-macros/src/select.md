这个文件定义了用于 Tokio 宏的辅助函数，特别是 `select!` 宏。它包含两个主要函数：`declare_output_enum` 和 `clean_pattern_macro`。

*   **`declare_output_enum`**:
    *   **功能**:  这个函数用于生成一个 `Out` 枚举和一个 `Mask` 类型，它们被 `select!` 宏用来管理多个异步操作的结果。
    *   **输入**:  它接收一个 `TokenStream` 作为输入，该流代表 `select!` 宏中分支的数量，例如 `(_ _ _)`，其中每个 `_` 代表一个分支。
    *   **处理**:
        1.  它首先计算分支的数量。
        2.  然后，它为每个分支生成一个标识符（例如 `_0`, `_1`, `_2`）。
        3.  它根据分支的数量选择一个合适的位域类型 (`u8`, `u16`, `u32`, `u64`) 来跟踪哪些 future 已经完成。
        4.  最后，它使用 `quote!` 宏生成 `Out` 枚举和 `Mask` 类型的代码。`Out` 枚举包含每个分支的变体，以及一个 `Disabled` 变体，表示所有分支都失败。`Mask` 类型用于表示位域。
    *   **输出**:  它返回生成的 `TokenStream`，其中包含 `Out` 枚举和 `Mask` 类型的定义。

*   **`clean_pattern_macro`**:
    *   **功能**:  这个函数用于清理模式，移除模式中的 `ref` 和 `mut` 关键字。这对于 `select!` 宏中的模式匹配是必要的。
    *   **输入**:  它接收一个 `TokenStream` 作为输入，该流代表一个模式。
    *   **处理**:
        1.  它尝试将输入的 `TokenStream` 解析为一个 `syn::Pat` 模式。如果解析失败，则原样返回输入的 `TokenStream`。
        2.  如果解析成功，它调用 `clean_pattern` 函数来移除模式中的 `ref` 和 `mut` 关键字。
        3.  最后，它将清理后的模式转换回 `TokenStream` 并返回。
    *   **输出**:  它返回清理后的 `TokenStream`。

*   **`clean_pattern`**:
    *   **功能**:  递归地移除模式中的 `ref` 和 `mut` 关键字。
    *   **处理**:  它使用模式匹配来处理不同类型的模式，并递归地调用自身来处理嵌套的模式。
    *   **输出**:  无，它直接修改传入的模式。
