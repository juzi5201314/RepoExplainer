这个文件定义了一组用于测试基于 futures 和 tokio 的代码的宏。这些宏简化了对异步代码的断言，使得测试更容易编写和理解。

关键组件：

*   `assert_ready!`: 断言一个 `Poll` 是 `Ready` 状态，并返回其值。如果不是 `Ready`，则会触发 panic。它有两个版本，一个没有自定义消息，另一个允许提供自定义 panic 消息。
*   `assert_ready_ok!`: 断言一个 `Poll<Result<...>>` 是 `Ready` 状态且结果是 `Ok`，并返回 `Ok` 中的值。如果不是，则会触发 panic。它也支持自定义消息。
*   `assert_ready_err!`: 断言一个 `Poll<Result<...>>` 是 `Ready` 状态且结果是 `Err`，并返回 `Err` 中的错误。如果不是，则会触发 panic。同样支持自定义消息。
*   `assert_pending!`: 断言一个 `Poll` 是 `Pending` 状态。如果不是，则会触发 panic。也支持自定义消息。
*   `assert_ready_eq!`: 断言一个 `Poll` 是 `Ready` 状态，并且其值等于期望值。如果断言失败，则会触发 panic。支持自定义消息。
*   `assert_ok!`: 断言一个表达式的结果是 `Ok`，并返回 `Ok` 中的值。如果不是，则会触发 panic。支持自定义消息。
*   `assert_err!`: 断言一个表达式的结果是 `Err`，并返回 `Err` 中的错误。如果不是，则会触发 panic。支持自定义消息。
*   `assert_elapsed!`: 断言自开始时间以来经过了指定的持续时间，允许有 1 毫秒的误差。这对于测试基于时间的异步操作非常有用。

这些宏通过检查 `Poll` 的状态和结果，简化了对异步代码的测试。它们提供了清晰的断言，并在断言失败时提供有用的错误消息，从而使调试更容易。
