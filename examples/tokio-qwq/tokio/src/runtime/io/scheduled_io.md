### 文件说明：`scheduled_io.rs`

#### **文件目的**
该文件是 Tokio 异步运行时的核心组件之一，负责管理 I/O 资源的就绪状态和任务通知机制。它通过原子操作和高效的数据结构，协调 I/O 驱动（如 epoll/kqueue）与等待 I/O 操作的任务之间的交互，确保异步 I/O 操作的高效性和非阻塞性。

---

#### **关键组件与功能**

1. **`ScheduledIo` 结构体**
   - **作用**：存储 I/O 资源的就绪状态，并管理等待该资源的任务列表。
   - **核心字段**：
     - `linked_list_pointers`: 链表指针，用于将 `ScheduledIo` 实例链接到全局 I/O 资源列表中。
     - `readiness`: 一个 `AtomicUsize`，以位域形式存储以下信息：
       - **就绪状态**（如可读、可写）。
       - **驱动器 tick**（用于防止过期事件通知）。
       - **关闭标志**（标记资源是否已关闭）。
     - `waiters`: 使用 `Mutex` 保护的 `Waiters` 结构，管理等待任务列表及专用读/写唤醒器。

   - **优化设计**：
     - **缓存对齐**：根据不同 CPU 架构（如 x86_64、ARM 等）的缓存行大小，通过 `repr(align(N))` 对结构体进行对齐，减少缓存伪共享（False Sharing）。
     - **原子操作**：通过 `AtomicUsize` 的位域操作实现高效无锁状态更新。

2. **`Waiters` 和 `Waiter` 结构**
   - **`Waiters`**：维护等待任务的链表（`list`），以及专用的读/写唤醒器（`reader` 和 `writer`），用于快速唤醒 `AsyncRead` 或 `AsyncWrite` 的任务。
   - **`Waiter`**：表示一个等待任务的条目，包含：
     - 链表指针（用于管理等待队列）。
     - 任务唤醒器（`Waker`）。
     - 等待兴趣（如读、写或两者）。
     - 是否已就绪的标记。

3. **核心方法**
   - **`wake` 方法**：当 I/O 状态变化时，遍历等待队列，唤醒所有满足条件的任务。使用 `WakeList` 批量唤醒以减少锁竞争。
   - **`set_readiness` 方法**：原子更新 I/O 就绪状态，并通过位域操作维护驱动器 tick。
   - **`readiness` 异步 future**：提供基于 `async/await` 的等待接口，通过 `Waiter` 链表管理异步任务的挂起与唤醒。

4. **状态管理**
   - **关闭处理**：`shutdown` 方法标记资源为关闭状态，并唤醒所有等待任务。
   - **就绪事件传播**：通过 `ReadyEvent` 结构体携带就绪状态、tick 和关闭标志，供上层逻辑处理。

---

#### **在项目中的角色**
该文件是 Tokio I/O 运行时的核心调度模块，负责：
- **I/O 状态跟踪**：通过原子位域高效记录 I/O 资源的就绪状态。
- **任务通知**：协调等待任务与 I/O 驱动事件，确保任务在 I/O 就绪时被及时唤醒。
- **资源管理**：提供安全的内存布局和锁机制，支持高并发场景下的低延迟 I/O 操作。
