### 文件说明：Tokio 运行时句柄模块

#### 文件目的
该文件定义了 Tokio 运行时的 `Handle` 结构体及其相关功能，用于提供对运行时的引用和交互能力。通过 `Handle` 可以执行任务调度、上下文管理、运行时信息查询等核心操作，是外部代码与 Tokio 运行时交互的核心接口。

---

#### 核心组件

1. **Handle 结构体**
   - **定义**：`Handle` 是运行时的句柄，内部持有 `scheduler::Handle` 引用计数指针。
   - **功能**：
     - 提供对运行时的无阻塞操作（如任务调度）。
     - 支持克隆，可在多线程环境中安全传递。
     - 通过 `current()` 和 `try_current()` 方法获取当前运行时的句柄。
     - 提供 `runtime_flavor()` 方法查询运行时类型（单线程或多线程）。

2. **EnterGuard 上下文管理器**
   - **作用**：通过 `Handle::enter()` 创建，用于临时进入运行时上下文环境。
   - **特性**：
     - 确保在作用域内保持运行时上下文有效。
     - 必须按逆序释放以避免 panic 和内存泄漏。

3. **任务调度方法**
   - **`spawn`**：将异步任务提交到运行时执行，根据任务大小决定是否装箱。
   - **`spawn_blocking`**：将阻塞任务提交到专用线程池，避免阻塞工作线程。
   - **`block_on`**：在当前线程阻塞执行异步任务，需注意单线程运行时的限制。

4. **运行时信息接口**
   - **`runtime_flavor`**：返回运行时类型（`CurrentThread` 或 `MultiThread`）。
   - **`metrics`**：获取运行时性能指标（如任务队列长度、线程使用情况）。
   - **`dump`（实验性）**：捕获运行时状态快照，用于调试任务阻塞问题。

5. **错误处理**
   - **`TryCurrentError`**：描述 `try_current()` 方法的两种错误场景：
     - `NoContext`：当前线程无有效运行时上下文。
     - `ThreadLocalDestroyed`：运行时线程局部存储已被销毁。

---

#### 关键方法详解

| 方法                  | 功能描述                                                                                     |
|-----------------------|---------------------------------------------------------------------------------------------|
| `Handle::enter()`     | 创建 `EnterGuard` 进入运行时上下文，允许在外部线程创建依赖运行时的异步资源（如 `tokio::spawn`）。 |
| `Handle::current()`   | 获取当前线程关联的运行时句柄，无上下文时 panic。                                             |
| `Handle::block_on()`  | 在当前线程阻塞执行异步任务，需注意单线程运行时的限制（需其他线程驱动 I/O 和定时器）。           |
| `Handle::spawn()`     | 异步任务调度，自动处理大尺寸任务的装箱优化。                                                 |
| `Handle::dump()`      | 实验性功能，捕获运行时任务状态快照，需特定编译配置和平台支持。                               |

---

#### 在项目中的角色
该文件是 Tokio 运行时的核心组件之一，提供对外交互的统一接口。通过 `Handle`，开发者可以：
- 在外部线程安全地调度异步任务。
- 管理运行时上下文，确保异步资源的正确创建。
- 查询运行时状态和性能指标。
- 处理跨线程的任务协调和错误场景。
